<li
    {% if can_modify %}
    x-data="{ openCancel: false, openComplete: false }"
    {% endif %}
    class="flex flex-col gap-5 p-5 bg-primary/20 hover:bg-primary/40 duration-300 rounded-md"
>
    <a href="{% url 'appointment_view' pk=appointment.pk %}" class="block underline">
        <h3 class="font-bold text-lg">
            Patient: {{ appointment.patient_name }}
            ( {{appointment.appointment_status}} )
        </h3>
        <div class="pt-2 flex gap-2 text-sm">
            <span>
                <span class="font-bold">Date:</span> {{ appointment.appointment_date }},
            </span>
            <span>
                <span class="font-bold">Time:</span> {{ appointment.appointment_slot.start_time }}
            </span>
        </div>
    </a>
    {% if can_modify %}
    <div class="block flex flex-wrap gap-3 items-center">
        {% if appointment.appointment_status == 'confirmed' %}
            <a
                type="button"
                hx-post="{% url 'appointment_mark_arrived' pk=appointment.pk %}"
                hx-headers='{ "X-CSRFToken": "{{ csrf_token }}" }'
                hx-confirm="Are you sure you want to mark this item as arrived?"
                hx-target="#appointment_list_today"
                hx-swap="innerHTML"
                class="inline-block px-4 py-2 border-2 border-blue-500 text-blue-500 hover:text-white hover:bg-blue-500 font-bold hover:opacity-100 rounded-md"
            >
                Mark Arrived
            </a>
            {% if user.is_superuser %}
                <button
                    x-on:click="openCancel = true"
                    class="inline-block px-4 py-2 border-2 border-red-500 text-red-500 hover:text-white hover:bg-red-500 font-bold hover:opacity-100 rounded-md"
                >
                    Cancel
                </button>
            {% endif %}
        {% elif appointment.appointment_status == 'arrived' %}
            {% if user.is_superuser %}
                <a
                    x-on:click="openComplete = true"
                    class="inline-block px-4 py-2 border-2 border-green-500 text-green-500 hover:text-white hover:bg-green-500 font-bold hover:opacity-100 rounded-md"
                >
                    Mark Completed
                </a>
            {% endif %}
            <a
                type="button"
                hx-post="{% url 'appointment_mark_arrived' pk=appointment.pk %}?is_reverse=True"
                hx-headers='{ "X-CSRFToken": "{{ csrf_token }}" }'
                hx-confirm="Are you sure you want to remove this item from arrived?"
                hx-target="#appointment_list_today"
                hx-swap="innerHTML"
                class="inline-block px-4 py-2 border-2 border-blue-500 text-blue-500 hover:text-white hover:bg-blue-500 font-bold hover:opacity-100 rounded-md"
            >
                Remove From Arrived
            </a>
        {% endif %}
    </div>
    {% endif %}

    {% if can_modify and user.is_superuser and appointment.appointment_status == 'confirmed'%}
        {% include 'idas/sub/inner/cancel_modal.html' %}
    {% endif %}
    {% if can_modify and user.is_superuser and appointment.appointment_status == 'arrived'%}
        {% include 'idas/sub/inner/complete_modal.html' %}
    {% endif %}
</li>